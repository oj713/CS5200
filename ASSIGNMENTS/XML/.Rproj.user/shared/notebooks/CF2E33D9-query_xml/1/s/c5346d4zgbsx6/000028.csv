"0","# retrieving list of all genres"
"0","genres <- xpath_help(""//book/genre/text()"") |> "
"0","  sapply(function(g) as(g, ""character"")) |>"
"0","  unique()"
"0",""
"0","get_genre <- function(genre) {"
"0","  # retrieving number of books"
"0","  numBooks <- xpath_help(""count(//book[genre = '"", genre, ""'])"")"
"0","  # retrieving average price"
"0","  avgPrice <- xpath_help(""//book[genre = '"", genre, ""']/price/text()"") |>"
"0","    sapply(function(p) as(p, ""numeric"")) |>"
"0","    mean()"
"0","  "
"0","  list(genre, numBooks, avgPrice)"
"0","}"
"0",""
"0",""
"0","do.call(rbind.data.frame, lapply(genres, get_genre)) |>"
"0","  setNames(c(""Genre"", ""Number of Books"", ""Average Price""))"
